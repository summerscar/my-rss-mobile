import { useLocation, withRouter } from "react-router-dom";
import React, { useContext } from 'react'
import Login from '../login'
import { NavBar, Icon } from 'antd-mobile';
import { AppContext } from '../../context';

const Header = (props) => {
  let location = useLocation();
  const { channel, channels } = useContext(AppContext);

  let Home = () => <svg t="1583392599756" className="am-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2188" width="32" height="32"><path d="M513.51198025 140.75069629l372.29605926 340.31186173c-18.95790618 2.32612345-36.75275062 10.11863704-50.9421037 22.56339754l-0.23261236 0.23261234-0.23261234 0.23261235c-13.7241284 12.21214816-30.00699261 33.72879011-30.00699258 67.57388642v316.934321H668.08288395V753.91683951c0-50.59318519-41.87022222-91.6492642-93.3938568-91.6492642H451.86970864c-51.52363457 0-93.39385678 41.17238519-93.39385679 91.6492642v134.56624197H223.79330373v-317.51585185c0-46.52246913-35.47338271-85.13611852-81.29801485-90.95142717l371.01669137-339.26510617m0-75.3664c-13.02629136 0-26.05258271 4.41963457-35.35707655 13.14259753L49.79926913 470.12977778c-15.35241481 13.14259754-19.77204938 32.91464691-11.51431111 50.9421037 8.25773827 17.5622321 25.81997038 27.91348148 46.05724444 27.91348148h46.05724444c13.14259754 0 23.61015309 9.88602469 23.6101531 21.86556049V912.09323457c0 25.23843951 22.44709136 46.05724444 49.89534815 46.05724444h174.45925924c27.44825678 0 49.89534815-20.81880494 49.89534816-46.05724444V753.91683951c0-12.09584198 10.46755556-21.86556049 23.61015309-21.8655605h122.81931851c13.14259754 0 23.61015309 9.88602469 23.6101531 21.8655605v158.29270123c0 25.23843951 22.44709136 46.05724444 50.47687901 46.05724445h174.45925926c28.02978766 0 51.05840989-20.81880494 51.05840988-46.05724445v-340.77708641c0-6.51314566 1.62828642-10.93278025 6.62945185-15.35241482 4.41963457-3.83810371 10.46755556-6.047921 16.98070124-6.047921H941.16977777c20.35358025 0 37.79950618-10.93278025 46.05724446-27.91348147 9.30449382-18.02745678 4.88485926-38.38103704-9.30449384-51.52363458L548.98536296 78.52689382c-9.30449382-8.72296296-22.44709136-13.14259754-35.47338271-13.14259753z" fill="#ffffff" p-id="2189"></path></svg>
  console.log(channel)
  return (
    <NavBar
      mode="dark"
      icon={location.pathname === '/' ? <Icon key="1" type="ellipsis" /> : <Home />}
      onLeftClick={location.pathname === '/' ? props.openDock : () => props.history.push('/')}
      rightContent={[
        <Login key="0"/>
      ]}
    >
      <div>{channels.find(item => item.value === channel).label}</div>
    </NavBar>
  )
}

export default withRouter(Header)
